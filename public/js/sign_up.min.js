var hasClient=!1;$(document).ready(function(){var a={},i=3;$(".mfp-register-form").click(function(e){e.preventDefault();var r=window.location.href,l=document.referrer;hasClient=!!$(this).hasClass("register-client"),$.ajax({type:"GET",url:registerurl,beforeSend:function(){$(".loading-process").show()},complete:function(){$(".loading-process").hide()},success:function(e){if(1==e.status){var t=!0;function n(){i=$("input[name='user_type']:checked").val(),partner_type=$("input[name='partner_type_id']").val(),model_type=$("input[name='model_type_id']").val(),hasClient&&(i=partner_type),$("#radio-"+i).prop("checked",!0),$(".first-popup-link, .second-popup-link").magnificPopup({closeBtnInside:!0}),3==i?($("#partner-fields").hide(),$("label[for = newsletter]").text($("#newsletter_model_id").text())):($("#partner-fields").show(),$("label[for = newsletter]").text($("#newsletter_partner_id").text())),$('input[name="user_type"]').click(function(){3==(i=$("input[name='user_type']:checked").val())?($("#partner-fields").hide(),$("label[for = newsletter]").text($("#newsletter_model_id").text())):($("#partner-fields").show(),$("label[for = newsletter]").text($("#newsletter_partner_id").text()))}),$(".mfp-register-form").on("click",function(e){t=!0}),$("#register-form").on("click",function(e){e.preventDefault();var n=$("#fields-validations").html();$("input,textarea,select").filter("[required]:visible").each(function(e,t){if(""==$(t).val()||null==$(t).val())return document.getElementsByName($(t).attr("name"))[0].setCustomValidity(""),document.getElementsByName($(t).attr("name"))[0].oninvalid=function(e){e.target.setCustomValidity(""),e.target.validity.valid||e.target.setCustomValidity(n)},document.getElementsByName($(t).attr("name"))[0].reportValidity(),$("html, body").animate({scrollTop:$(t).offset().top-100},500,function(){$(t).focus()}),!1});window.location.origin;var t=$("#submit-register .g-recaptcha").attr("data-widgetId"),a=grecaptcha.getResponse(t),i={_token:$("input[name='_token']").val(),first_name:$("input[name='first_name']").val(),last_name:$("input[name='last_name']").val(),user_type:$("input[name='user_type']:checked").val(),company_name:$("input[name='company_name']").val(),website:$("input[name='website']").val(),country:$("#country").val(),email:$("input[name='email']").val(),term:$("input[name='term']:checked").val(),"g-recaptcha-response":a,newsletter:$("input[name='newsletter']:checked").val(),referer_url:l,current_url:r};$.ajax({method:"post",url:$("#submit-register").attr("action"),dataType:"json",data:i,beforeSend:function(){$(".loading-process").show(),$(".print-success-msg").html(""),$(".print-success-msg").css("display","none"),$("p").removeClass("help-block"),$(".err-input").html(""),$("#error-recaptcha-msg").html(""),$("#error-terms").html("")},complete:function(){$(".loading-process").hide()},success:function(e){null!=e&&0==e.success?($(".err-input").html(""),$("p").removeClass("help-block"),$("#error-recaptcha-msg").html(""),$("#error-terms").html(""),$.each(e.errors,function(e,t){$("#"+e).addClass("help-block"),"g-recaptcha-response"===e?($("#error-recaptcha-msg").addClass("help-block"),$("#error-recaptcha-msg").html(t[0])):"term"===e?($("#error-terms").addClass("help-block"),$("#error-terms").html(t[0])):$("#"+e).html(t[0])})):e.success&&("live"==document.getElementById("app-env").value&&window.dataLayer.push({event:"signup-form-submit",firstname:$("input[name='first_name']").val(),lastname:$("input[name='last_name']").val(),email:$("input[name='email']").val(),usertype:"3"==$("input[name='user_type']:checked").val()?"model":"partner"}),null!=e.message&&""!=e.message&&null!=e.message&&null!=e.redirectUrl&&""!=e.redirectUrl&&null!=e.redirectUrl&&(null!=e.direct&&""!=e.direct&&null!=e.direct?window.location.replace(e.redirectUrl):($("div").removeClass("invalid-input"),$(".print-success-msg").css("display","block"),$(".print-success-msg").append("<p>"+e.message+"</p>"),$("#register-form").prop("disabled",!0),setTimeout(function(){$(".print-success-msg").css("display","none"),$.magnificPopup.close(),window.location.replace(e.redirectUrl)},3e3))))},error:function(e,t,n){console.log("error")}})}),$("#term-condition").on("click",function(e){e.preventDefault(),e.stopPropagation(),a={_token:$("input[name='_token']").val(),first_name:$("input[name='first_name']").val(),last_name:$("input[name='last_name']").val(),user_type:$("input[name='user_type']:checked").val(),company_name:$("input[name='company_name']").val(),website:$("input[name='website']").val(),country:$("#country").val(),email:$("input[name='email']").val(),term:$("input[name='term']:checked").val(),newsletter:$("input[name='newsletter']:checked").val()},i=$("input[name='user_type']:checked").val(),$.ajax({type:"POST",url:siteUrl+"/get-term-ajax",data:{userType:i},beforeSend:function(){$(".loading-process").show()},complete:function(){$(".loading-process").hide()},success:function(e){1==e.status&&$.magnificPopup.open({items:{src:e.html,type:"inline"},closeOnBgClick:!1,closeBtnInside:!0})}})}),$(".mobile-popup-btn").on("click",function(){return $.magnificPopup.close(),$(".mfp-register-form").magnificPopup({items:{src:e.html,type:"inline"},closeOnBgClick:!1,closeBtnInside:!0}).magnificPopup("open"),n(),!1}),$("#fb_login").on("click",function(){window.location=$("input[name='facebook_link']").val()}),$("#google_login").on("click",function(){window.location=$("input[name='google_link']").val()})}$(".mfp-register-form").magnificPopup({items:{src:e.html,type:"inline"},closeOnBgClick:!1,closeBtnInside:!0}).magnificPopup("open"),n(),$.magnificPopup.instance.close=function(){if(null!=$.magnificPopup.instance.currItem&&t&&$("div.term-condition-popup-ajax").length)return $(".mfp-register-form").magnificPopup({items:{src:e.html,type:"inline"},closeOnBgClick:!1,closeBtnInside:!0}).magnificPopup("open"),i=a.user_type,$("input[name='first_name']").val(a.first_name),$("input[name='last_name']").val(a.last_name),$("input[name='company_name']").val(a.company_name),$("input[name='website']").val(a.website),$("#country").val(a.country),$("input[name='email']").val(a.email),$("input[name='term']:checked").val(a.term),$("input[name='newsletter']:checked").val(a.newsletter),3==i?($("#radio-2").attr("checked",!1),$("#radio-3").attr("checked",!0)):($("#radio-3").attr("checked",!1),$("#radio-2").attr("checked",!0)),1==a.term&&$("#terms").attr("checked",!0),1==a.newsletter&&$("#newsletter").attr("checked",!0),n(),!1;"#mfp-sign-up"===$.magnificPopup.instance.currItem.data.src&&$("div").removeClass("invalid-input"),$.magnificPopup.proto.close.call(this)}}}})}),$(document).on("click",".close-popup-button",function(){$("#mfp-model-terms").magnificPopup("close")})});